<!-- @format -->

# High

## [H-1] `TSwapPool::swap` function breaking the entire protocol by doing some random stuff. It should be removed.

**Description:**

**Impact:**

**Proof of Concept:**

**Recommended Mitigation:**

## [H-2] `TSwapPool::getInputAmountBasedOnOutput` Gas fee is calculating wrong.
**Description** In `TSwapPool::getInputAmountBasedOnOutput` function, gas fee is calculating wrong. In the function, we are calculating the gas fee by multiplying the `outputAmount` with `gasFee` and then dividing it by `10000`. But the correct way to calculate the gas fee is to multiply the `outputAmount` with `gasFee` and then divide it by `1000`. So, it is recommended to change the `10000` to `1000` in the function.

**Impact** It will affect the gas fee calculation of the contract. It will rise gas from 0.3% to 91.5%(approx) which is a huge difference.

**Proof of Concept:**
```diff
        return
-            ((inputReserves * outputAmount) * 10000) /
            ((outputReserves - outputAmount) * 997);

+            ((inputReserves * outputAmount) * 1000) /

```
**Recommended Mitigation:** It is recommended to change the `10000` to `1000` in the function.

# Medium

# Low

## [L-1] In `PoolFactory::createPool` function wrong concatenation of strings has been done.

**Description** In `PoolFactory::createPool` function, wrong concatenation of strings has been done. In `liquidityTokenSymbol` variable we are concatenating `ts` symbol with the `.name()` function which is wrong, we have to use `.symbol()` function instead of `.name()` function.

**Impact** It will not affect the functionality of the contract but it will affect the readability of the contract.

**Proof of Concept:**
<detials>

```diff
        string memory liquidityTokenSymbol = string.concat(
            "ts",
-            IERC20(tokenAddress).name()
        );

        string memory liquidityTokenSymbol = string.concat(
            "ts",
+            IERC20(tokenAddress).symbol()
        );
```

</details>

## [L-2] `TSwapPool::deposit` function has unused variable `poolTokenReserves`.

**Description** In `TSwapPool::deposit` function, `poolTokenReserves` variable is declared but not used anywhere in the function. It is recommended to remove the unused variable to reduce the contract size and gas cost.

**Impact** It will not affect the functionality of the contract but it will affect the readability of the contract.

**Proof of Concept**

<details>

```diff
-            uint256 poolTokenReserves = i_poolToken.balanceOf(address(this));
```
</details>

# Informational

## [I-1] `PUSH0` is not supported by all chains

**Description:** Solc compiler version 0.8.20 switches the default target EVM version to Shanghai, which means that the generated bytecode will include PUSH0 opcodes. Be sure to select the appropriate EVM version in case you intend to deploy on a chain other than mainnet like L2 chains that may not support PUSH0, otherwise deployment of your contracts will fail.

**Recommended Mitigation:** Use the appropriate EVM version for your deployment target.

**Impact** It might affect the contract in future if you try to deploy on any other L2.

 <details><summary>2 Found Instances</summary>
 
 
 - Found in src/PoolFactory.sol [Line: 15](src/PoolFactory.sol#L15)
 
 	```solidity
 	pragma solidity 0.8.20;
 	```
 
 - Found in src/TSwapPool.sol [Line: 15](src/TSwapPool.sol#L15)
 
 	```solidity
 	pragma solidity 0.8.20;
 	```
 
 </details>
 
  ## [I-2] In `PoolFactory__PoolDoesNotExist` this custom error is not used anywhere in the contract.
 **Description:** `PoolFactory__PoolDoesNotExist` is not used any any where in the contract it is recommended to remove it. This  will reduce the contract size and gas cost. It wil also make the contract more readable.
 
 <details><summary>1 Found Instances</summary>
 
 
 - Found in src/PoolFactory.sol [Line: 22](src/PoolFactory.sol#L22)
 
 	```solidity
 	    error PoolFactory__PoolDoesNotExist(address tokenAddress);
 	```
 
 </details>
 
 
  ## [I-3] `PoolFactory::PoolCreated` Event is missing indexed fields.
 **Description** Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note  that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event  (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly  of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.
 
 <details><summary>4 Found Instances</summary>
 
 
 - Found in src/PoolFactory.sol [Line: 35](src/PoolFactory.sol#L35)
 
 	```solidity
 	    event PoolCreated(address tokenAddress, address poolAddress);
 	```
 
 - Found in src/TSwapPool.sol [Line: 52](src/TSwapPool.sol#L52)
 
 	```solidity
 	    event LiquidityAdded(
 	```
 
 - Found in src/TSwapPool.sol [Line: 57](src/TSwapPool.sol#L57)
 
 	```solidity
 	    event LiquidityRemoved(
 	```
 
 - Found in src/TSwapPool.sol [Line: 62](src/TSwapPool.sol#L62)
 
 	```solidity
 	    event Swap(
 	```
 
 </details>
 
  ## [I-4] In `PoolFactory` contract, constructor is not checking for zero address.
 **Description:** In the constructor of `PoolFactory` contract, it is not checking for zero address. It is recommended to check  for zero address before deploying the contract.
 
 
 <details><summary>1 Found Instances</summary>
 
 - Found in src/PoolFactory.sol [Line: 43](src/PoolFactory.sol#L43)
 
 	```solidity
     constructor(address wethToken) {
         
         i_wethToken = wethToken;
     }
 	```
 </details>

## [I-5]: Large literal values multiples of 10000 can be replaced with scientific notation

**Description**Use `e` notation, for example: `1e18`, instead of its full numeric value.

```diff
-	    uint256 private constant MINIMUM_WETH_LIQUIDITY = 1_000_000_000;
+       uint256 private constant MINIMUM_WETH_LIQUIDITY = 1e9;
```

## [I-6] In `TSwapPool` contract, constructor is not checking for zero address.

**Description:** In the constructor of `TSwapPool` contract, it is not checking for zero address. It is recommended to check for zero address before deploying the contract.

 <details><summary>1 Found Instances</summary>
 
 - Found in src/TSwapPool.sol [Line: 92](src/TSwapPool.sol#L92)
 
 	```solidity
    constructor(
        address poolToken,
        address wethToken,
        string memory liquidityTokenName,
        string memory liquidityTokenSymbol
    ) ERC20(liquidityTokenName, liquidityTokenSymbol) {
        i_wethToken = IERC20(wethToken);
        i_poolToken = IERC20(poolToken);
    }
 	```
 </details>

 ## [I-7] Use of `magic numbers` in TSwapPool::getOutputAmountBasedOnInput` should be avoided.

**Description**It can be cofuncing to see number literals in a codebase, and it's much more readable of the numbers are given in a code base.

```diff
+        uint256 constant VALUE_AFTER_FEE_DEDUCTION = 997;
+        uint256 constant VALUE_AFTER_FEE_MULTIPLICATION = 1000;    

-       uint256 inputAmountMinusFee = inputAmount * 997;
+       uint256 inputAmountMinusFee = inputAmount * VALUE_AFTER_FEE_DEDUCTION;
        uint256 numerator = inputAmountMinusFee * outputReserves;
-        uint256 denominator = (inputReserves * 1000) + inputAmountMinusFee;
+        uint256 denominator = (inputReserves * VALUE_AFTER_FEE_MULTIPLICATION) + inputAmountMinusFee;

```

# Gas
